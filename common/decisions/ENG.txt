ENG_rearmament_program = {
		ENG_militarisation = {

		icon = generic_construction

		priority = 100

		available = {
			has_army_manpower = { size > 799999 } 
			has_deployed_air_force_size = {
			    size > 999
			    type = fighter
			}
			OR = {
				has_deployed_air_force_size = {
				    size > 139
				    type = cas
				}
				has_deployed_air_force_size = {
				    size > 139
				    type = strategic_bomber
				}
				has_deployed_air_force_size = {
				    size > 549
				    type = tactical_bomber	
				}
			}	
			OR = {
				has_equipment = {
					medium_tank_equipment > 799
				}
				has_equipment = {
					heavy_tank_equipment > 559
				}
			}
			has_equipment = {
				special_equipment > 899
			}		
		}	

#		activation = {
#			OR = {
#				has_completed_focus = ENG_embargo_germany
#				has_completed_focus = ENG_peace_time
#			}	
#		}

		days_mission_timeout = 1460
		is_good = no
		fire_only_once = yes

		visible = {
			OR = {
				has_completed_focus = ENG_embargo_germany
				has_completed_focus = ENG_peace_time
			}
		}

		modifier = {
		}

		timeout_effect = {
	
		}

		complete_effect = {
			custom_effect_tooltip = ENG_BEF_tt
			hidden_effect = {
				if = {
					limit = {
						has_tech = eng_fighter_1939
						NOT = {
							has_tech = eng_fighter_1940		
						}	
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment_1939
							amount = 400
							producer = ENG
					}
				}
				if = {
					limit = {
						has_tech = eng_fighter_1940
						NOT = {
							has_tech = eng_fighter_1939	
						}
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment_1940
							amount = 400
							producer = ENG
					}	
				}	
				if = {
					limit = {
						AND = {
						has_tech = eng_fighter_1940
						has_tech = eng_fighter_1939	
						}
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment_1940
							amount = 400
							producer = ENG
					}	
				}	
				if = {
					limit = {
						has_tech = eng_medium_tank_1938
						NOT = {
							has_tech = eng_medium_tank_1940
							has_tech = eng_heavy_tank_1939
						}
					}
					add_equipment_to_stockpile = {
						type = medium_tank_equipment_1938
							amount = 500
							producer = ENG
					}
				}
				if = {
					limit = {
						has_tech = eng_heavy_tank_1939
						NOT = {
							has_tech = eng_medium_tank_1940
							has_tech = eng_medium_tank_1938
						}
					}
					add_equipment_to_stockpile = {
						type = heavy_tank_equipment_1939
							amount = 350
							producer = ENG
					}
				}
				if = {
					limit = {
						has_tech = eng_heavy_tank_1939
						has_tech = eng_medium_tank_1938
						NOT = {
							has_tech = eng_medium_tank_1940
						}
					}
					add_equipment_to_stockpile = {
						type = heavy_tank_equipment_1939
							amount = 350
							producer = ENG
					}
					add_equipment_to_stockpile = {
						type = medium_tank_equipment_1938
							amount = 500
							producer = ENG
					}
				}
				if = {
					limit = {
						has_tech = eng_heavy_tank_1939
						has_tech = eng_medium_tank_1940
					}
					add_equipment_to_stockpile = {
						type = heavy_tank_equipment_1939
							amount = 350
							producer = ENG
					}
					add_equipment_to_stockpile = {
						type = medium_tank_equipment_1940
							amount = 500
							producer = ENG
					}
				}
				if = {
					limit = {
						has_tech = eng_medium_tank_1940
						NOT = {
							has_tech = eng_heavy_tank_1939
						}
					}
					add_equipment_to_stockpile = {
						type = medium_tank_equipment_1940
							amount = 500
							producer = ENG
					}	
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
						amount = 500
						producer = ENG
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
						amount = 4000
						producer = ENG
				}
			}	
		}	
	}

	ENG_smallarmsfocus = {
		icon = generic_industry

		available = {
			tag = ENG
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

		}
	}

	ENG_armourfocus = {
		icon = generic_tank

		available = {
			tag = ENG
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

		}
	}

	ENG_fighterfocus = {
		icon = generic_air

		available = {
			tag = ENG
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

		}
	}

	ENG_modernise_navy = {
		icon = generic_naval

		available = {
			tag = ENG
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		cost = 50
		fire_only_once = yes
		days_remove = -1

		ai_will_do = {
			factor = 1
		}

		complete_effect = {

		}
	}

}

military_category = {

ENG_organise_desert_rats = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ENG
		}

		visible = {
			always = yes
		}

		fire_only_once = yes

		cost = 0

		custom_cost_trigger = {
			command_power > 10
		}

		custom_cost_text = command_pwr_10

		complete_effect = {
				hidden_effect {
				load_oob = ENG_7_armoured_div
				load_oob = ENG_7_armoured_div
				add_command_power = -10
				}
		}

		ai_will_do = {
				factor = 200 #Gotta Larp
		}
	}
}

political_category = {

	#ENG_host_CZE_exile_government = {
	#
	#	icon = generic
	#
	#	allowed = {
	#		has_dlc = "Man the Guns"
	#		original_tag = ENG
	#		
	#	}
	#	available = {
	#		has_government = democratic
	#	}
	#	cost = 50
	#	fire_only_once = yes
	#	ai_will_do = {
	#		factor = 1
	#	}
	#
	#	visible = {
	#		CZE = {
	#			exists = no
	#		}
	#	
	#		CZE = {
	#			is_government_in_exile = no
	#		}
	#	
	#		9 = { CONTROLLER = { has_war_with = ROOT } }
	#	}
	#	complete_effect = {
	#		CZE = {
	#			become_exiled_in = {
	#				target = ROOT
	#				legitimacy = 50
	#			}
	#		}
	#	}
	#}
	hold_blood_toil_tears_sweat_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = blood_toil_tears_sweat_speech }
			}
			set_country_flag = blood_toil_tears_sweat_speech
			play_blood_toil_tears_sweat_effect = yes
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	hold_fight_on_the_beaches_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
			is_in_faction_with = FRA
			FRA = {
				surrender_progress > 0.2
			}
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_flag = blood_toil_tears_sweat_speech
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = fight_on_the_beaches_speech }
			}
			set_country_flag = fight_on_the_beaches_speech
			play_we_shall_fight_on_the_beaches_effect = yes
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	hold_this_was_their_finest_hour_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
			is_in_faction_with = FRA
			FRA = { has_capitulated = yes }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_flag = fight_on_the_beaches_speech
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = this_was_their_finest_hour_speech }
			}
			set_country_flag = this_was_their_finest_hour_speech
			play_their_finest_hour_effect = yes
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	macdonald_proposal = {
	
		allowed = {
			tag = ENG
		}
		
		available = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			IRE = { exists = yes }
			NOT = { is_in_faction_with = IRE }
			FRA = { has_capitulated = yes }
			is_in_faction_with = FRA
		}

		cost = 50
		
		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			IRE = { exists = yes }
		}
		
		complete_effect = {
			IRE = { country_event = { id = wtt_britain.24 } }
			add_popularity = { ideology = democratic popularity = 0.03 }
			add_stability = -0.05
		}

		ai_will_do = {
			factor = 1
		}
	}

	ENG_invoke_the_alliance_of_1373 = {

		icon = generic_prepare_civil_war
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_war = yes
			has_government = democratic
			POR = {
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
			}
			POR = { is_in_faction = no }
			is_faction_leader = yes
		}

		cost = 100
		
		visible = {
			has_war = yes
			NOT = { has_war_with = POR }
		}
		
		complete_effect = {
			POR = { country_event = generic.5 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_enemy_country = {
						original_tag = SPR
					}
				}
			}
		}
	}

	ENG_request_azores_lease = {
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_war = yes
			has_government = democratic
			POR = {
				has_full_control_of_state = 698
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
			}
			POR = { is_in_faction = no }
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 10
		}
		
		visible = {
			has_war = yes
			POR = {
				has_full_control_of_state = 698
				NOT = { has_war_with = ROOT }
			}
		}
		
		complete_effect = {
			POR = { country_event = wtt_britain_lease_azores.1 }
		}
	}

}

ENG_imperial_conference_decision = {
	
	ENG_imperial_conference_decision = {

		icon = generic_political_discourse
		
		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 60

		fire_only_once = yes

		activation = {
			tag = ENG
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		visible = {
			tag = ENG
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		cancel_if_not_visible = no

		is_good = yes

		complete_effect = {
			
		}

		timeout_effect = {
			custom_effect_tooltip = imperial_conference_ends_tt
			every_country = {
				limit = {
					OR = {
						AND = {
							is_subject_of = ENG
							tag = CAN
						}
						AND = {
							is_subject_of = ENG
							tag = SAF
						}
						AND = {
							is_subject_of = ENG
							tag = RAJ
						}
						AND = {
							is_subject_of = ENG
							tag = AST
						}
						AND = {
							is_subject_of = ENG
							tag = NZL
						}
					}
				}
				remove_opinion_modifier = { target = ENG modifier = ENG_imperial_conference_opinion }
				remove_opinion_modifier = { target = ENG modifier = ENG_imperial_conference_approved_resolution }
			}
		}
	}
	
	ENG_discuss_imperial_defense = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.83 hours = 6 }
			set_country_flag = ENG_imperial_conference_discussion_in_progress
		}

		ai_will_do = {
			factor = 100
		}
	}

	ENG_discuss_imperial_trade = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.87 hours = 6 }
			set_country_flag = ENG_imperial_conference_discussion_in_progress
		}

		ai_will_do = {
			factor = 100
		}
	}

	ENG_discuss_imperial_economy = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.91 hours = 6 }
			set_country_flag = ENG_imperial_conference_discussion_in_progress
		}

		ai_will_do = {
			factor = 100
		}
	}

	ENG_discuss_appeasement = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
			has_war = no
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.95 hours = 6 }
			set_country_flag = ENG_imperial_conference_discussion_in_progress
		}

		ai_will_do = {
			factor = 100
		}
	}

	ENG_discuss_imperial_federation = {

		icon = eng_imperial_federation

		allowed = {
			tag = ENG
		}

		available = {
			NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
			OR = {
				CAN = { exists = yes }
				SAF = { exists = yes }
				AST = { exists = yes }
				NZL = { exists = yes }
				AND = {
					RAJ = { is_subject_of = ENG }
					has_completed_focus = ENG_indian_autonomy
				}
			}
		}

		cost = 100

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.99 hours = 6 }
			set_country_flag = ENG_imperial_conference_discussion_in_progress
			if = {
				limit = {
					NOT = { has_completed_focus = ENG_indian_autonomy }
				}
				custom_effect_tooltip = ENG_indian_autonomy_tt
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
}
